"use strict";angular.module("airFilters",[]).filter("shaf",function(){return function(t){return void 0!==t?t.substr(0,10):""}}),angular.module("air",["ionic","airFilters"]).controller("MainCtrl",["$scope","$http","$ionicModal","$window",function(t,s,a,i){var e=["TROS-APP-IOS-ALIYUN","TROS-APP-IOS-JINGBAO-UAT"];t.builds=[],s.json("https://lingoer.github.io/OTA/presale.json").success(function(a){var e={},n="TROS-APP-IOS-PRESALE";for(var o in a.actions)void 0!==a.actions[o].lastBuiltRevision&&(e.lastbuildrev=a.actions[o].lastBuiltRevision.SHA1);e.timestamp=moment(a.timestamp).fromNow(),e.name=a.fullDisplayName.substr(13),e.changes=[];for(var r in a.changeSet.items)e.changes.push(a.changeSet.items[r].msg);e.install=function(){i.open(navigator.userAgent.match(/iPhone/)?"itms-services://?action=download-manifest&url=https://lingoer.github.io/OTA/"+n+".plist":"http://10.17.7.27:8080/job/"+n+"/lastSuccessfulBuild/artifact/platforms/android/ant-build/barbarian-debug.apk")},t.builds.push(e),s.get("https://api.github.com/repos/ThoughtWorksInc/barbarian/git/refs/heads/master?access_token=cbba5c4b44a9e22b45eda71bae7d7b7e5b22d3ec").success(function(t){e.latest=t.object.sha===e.lastbuildrev?"yes":"no"})});var n=function(a){if(0!==a.length){var e=a.pop();s.jsonp("http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/api/json?jsonp=JSON_CALLBACK").success(function(o){var r={};for(var c in o.actions)void 0!==o.actions[c].lastBuiltRevision&&(r.lastbuildrev=o.actions[c].lastBuiltRevision.SHA1);r.timestamp=moment(o.timestamp).fromNow(),r.name=o.fullDisplayName.substr(13),r.changes=[];for(var l in o.changeSet.items)r.changes.push(o.changeSet.items[l].msg);r.install=function(){i.open(navigator.userAgent.match(/iPhone/)?"itms-services://?action=download-manifest&url=https://lingoer.github.io/OTA/"+e+".plist":"http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/artifact/platforms/android/ant-build/barbarian-debug.apk")},t.builds.push(r),s.get("https://api.github.com/repos/ThoughtWorksInc/barbarian/git/refs/heads/master?access_token=cbba5c4b44a9e22b45eda71bae7d7b7e5b22d3ec").success(function(t){r.latest=t.object.sha===r.lastbuildrev?"yes":"no"}),n(a)})}};n(e)}]);