"use strict";angular.module("airFilters",[]).filter("shaf",function(){return function(t){return void 0!==t?t.substr(0,10):""}}),angular.module("air",["ionic","airFilters"]).controller("MainCtrl",["$scope","$http","$ionicModal","$window",function(t,i,a,s){var e=["TROS-APP-IOS-ALIYUN","TROS-APP-IOS-JINGBAO-UAT"];t.builds=[];var n=function(a){if(0!==a.length){var e=a.pop();i.jsonp("http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/api/json?jsonp=JSON_CALLBACK").success(function(o){var r={};for(var l in o.actions)void 0!==o.actions[l].lastBuiltRevision&&(r.lastbuildrev=o.actions[l].lastBuiltRevision.SHA1);r.timestamp=moment(o.timestamp).fromNow(),r.name=o.fullDisplayName,r.changes=[];for(var c in o.changeSet.items)r.changes.push(o.changeSet.items[c].msg);r.install=function(){s.open(navigator.userAgent.match(/iPhone/)?"itms-services://?action=download-manifest&url=https://lingoer.github.io/OTA/"+e+".plist":"http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/artifact/platforms/android/ant-build/barbarian-debug.apk")},t.builds.push(r),i.get("https://api.github.com/repos/ThoughtWorksInc/barbarian/git/refs/heads/master?access_token=cbba5c4b44a9e22b45eda71bae7d7b7e5b22d3ec").success(function(t){r.latest=t.object.sha===r.lastbuildrev?"yes":"no"}),n(a)})}};n(e)}]);