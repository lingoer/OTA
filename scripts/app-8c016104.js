"use strict";angular.module("airFilters",[]).filter("shaf",function(){return function(t){return void 0!==t?t.substr(0,10):""}}),angular.module("air",["ionic","airFilters"]).controller("MainCtrl",["$scope","$http","$ionicModal","$window",function(t,s,i,a){var e=["TROS-APP-IOS-ALIYUN","TROS-APP-IOS-JINGBAO-UAT","TROS-APP-ANDROID-JINGBAO-V3","TROS-APP-ANDROID-JINGBAO-V3-TW","TROS-APP-IOS-PRESALE"];t.builds=[];var n=function(i){if(0!==i.length){var e=i.pop();s.jsonp("http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/api/json?jsonp=JSON_CALLBACK").success(function(o){var r={};for(var l in o.actions)void 0!==o.actions[l].lastBuiltRevision&&(r.lastbuildrev=o.actions[l].lastBuiltRevision.SHA1);r.timestamp=moment(o.timestamp).fromNow(),r.name=o.fullDisplayName.substr(13),r.changes=[];for(var u in o.changeSet.items)r.changes.push(o.changeSet.items[u].msg);r.install=function(){a.open(navigator.userAgent.match(/iPhone/)?"itms-services://?action=download-manifest&url=https://lingoer.github.io/OTA/"+e+".plist":"http://10.17.7.27:8080/job/"+e+"/lastSuccessfulBuild/artifact/platforms/android/ant-build/barbarian-debug.apk")},t.builds.push(r),s.get("https://api.github.com/repos/ThoughtWorksInc/barbarian/git/refs/heads/master?access_token=cbba5c4b44a9e22b45eda71bae7d7b7e5b22d3ec").success(function(t){r.latest=t.object.sha===r.lastbuildrev?"yes":"no"}),n(i)})}};n(e)}]);